import "./chunk-HJUO743Z.js";
import {
  BufferGeometry,
  Float32BufferAttribute,
  LineBasicMaterial,
  LineSegments,
  Vector3
} from "./chunk-2KNTCVP2.js";

// node_modules/three/examples/jsm/helpers/VertexTangentsHelper.js
var _v1 = new Vector3();
var _v2 = new Vector3();
var VertexTangentsHelper = class extends LineSegments {
  /**
   * Constructs a new vertex tangents helper.
   *
   * @param {Object3D} object - The object for which to visualize vertex tangents.
   * @param {number} [size=1] - The helper's size.
   * @param {number|Color|string} [color=0xff0000] - The helper's color.
   */
  constructor(object, size = 1, color = 65535) {
    const geometry = new BufferGeometry();
    const nTangents = object.geometry.attributes.tangent.count;
    const positions = new Float32BufferAttribute(nTangents * 2 * 3, 3);
    geometry.setAttribute("position", positions);
    super(geometry, new LineBasicMaterial({ color, toneMapped: false }));
    this.object = object;
    this.size = size;
    this.type = "VertexTangentsHelper";
    this.matrixAutoUpdate = false;
    this.update();
  }
  /**
   * Updates the vertex normals preview based on the object's world transform.
   */
  update() {
    this.object.updateMatrixWorld(true);
    const matrixWorld = this.object.matrixWorld;
    const position = this.geometry.attributes.position;
    const objGeometry = this.object.geometry;
    const objPos = objGeometry.attributes.position;
    const objTan = objGeometry.attributes.tangent;
    let idx = 0;
    for (let j = 0, jl = objPos.count; j < jl; j++) {
      _v1.fromBufferAttribute(objPos, j).applyMatrix4(matrixWorld);
      _v2.fromBufferAttribute(objTan, j);
      _v2.transformDirection(matrixWorld).multiplyScalar(this.size).add(_v1);
      position.setXYZ(idx, _v1.x, _v1.y, _v1.z);
      idx = idx + 1;
      position.setXYZ(idx, _v2.x, _v2.y, _v2.z);
      idx = idx + 1;
    }
    position.needsUpdate = true;
  }
  /**
   * Frees the GPU-related resources allocated by this instance. Call this
   * method whenever this instance is no longer used in your app.
   */
  dispose() {
    this.geometry.dispose();
    this.material.dispose();
  }
};
export {
  VertexTangentsHelper
};
//# sourceMappingURL=three_addons_helpers_VertexTangentsHelper__js.js.map

{
  "version": 3,
  "sources": ["../../three/examples/jsm/helpers/VertexTangentsHelper.js"],
  "sourcesContent": ["import {\n\tBufferGeometry,\n\tFloat32BufferAttribute,\n\tLineSegments,\n\tLineBasicMaterial,\n\tVector3\n} from 'three';\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\n\n/**\n * Visualizes an object's vertex tangents.\n *\n * Requires that tangents have been specified in the geometry as a buffer attribute or\n * have been calculated using {@link BufferGeometry#computeTangents}.\n * ```js\n * const helper = new VertexTangentsHelper( mesh, 1, 0xff0000 );\n * scene.add( helper );\n * ```\n *\n * @augments LineSegments\n * @three_import import { VertexTangentsHelper } from 'three/addons/helpers/VertexTangentsHelper.js';\n */\nclass VertexTangentsHelper extends LineSegments {\n\n\t/**\n\t * Constructs a new vertex tangents helper.\n\t *\n\t * @param {Object3D} object - The object for which to visualize vertex tangents.\n\t * @param {number} [size=1] - The helper's size.\n\t * @param {number|Color|string} [color=0xff0000] - The helper's color.\n\t */\n\tconstructor( object, size = 1, color = 0x00ffff ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst nTangents = object.geometry.attributes.tangent.count;\n\t\tconst positions = new Float32BufferAttribute( nTangents * 2 * 3, 3 );\n\n\t\tgeometry.setAttribute( 'position', positions );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color, toneMapped: false } ) );\n\n\t\t/**\n\t\t * The object for which to visualize vertex tangents.\n\t\t *\n\t\t * @type {Object3D}\n\t\t */\n\t\tthis.object = object;\n\n\t\t/**\n\t\t * The helper's size.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.size = size;\n\n\t\tthis.type = 'VertexTangentsHelper';\n\n\t\t/**\n\t\t * Overwritten and set to `false` since the object's world transformation\n\t\t * is encoded in the helper's geometry data.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\t/**\n\t * Updates the vertex normals preview based on the object's world transform.\n\t */\n\tupdate() {\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tconst matrixWorld = this.object.matrixWorld;\n\n\t\tconst position = this.geometry.attributes.position;\n\n\t\t//\n\n\t\tconst objGeometry = this.object.geometry;\n\n\t\tconst objPos = objGeometry.attributes.position;\n\n\t\tconst objTan = objGeometry.attributes.tangent;\n\n\t\tlet idx = 0;\n\n\t\t// for simplicity, ignore index and drawcalls, and render every tangent\n\n\t\tfor ( let j = 0, jl = objPos.count; j < jl; j ++ ) {\n\n\t\t\t_v1.fromBufferAttribute( objPos, j ).applyMatrix4( matrixWorld );\n\n\t\t\t_v2.fromBufferAttribute( objTan, j );\n\n\t\t\t_v2.transformDirection( matrixWorld ).multiplyScalar( this.size ).add( _v1 );\n\n\t\t\tposition.setXYZ( idx, _v1.x, _v1.y, _v1.z );\n\n\t\t\tidx = idx + 1;\n\n\t\t\tposition.setXYZ( idx, _v2.x, _v2.y, _v2.z );\n\n\t\t\tidx = idx + 1;\n\n\t\t}\n\n\t\tposition.needsUpdate = true;\n\n\t}\n\n\t/**\n\t * Frees the GPU-related resources allocated by this instance. Call this\n\t * method whenever this instance is no longer used in your app.\n\t */\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nexport { VertexTangentsHelper };\n"],
  "mappings": ";;;;;;;;;;AAQA,IAAM,MAAM,IAAI,QAAQ;AACxB,IAAM,MAAM,IAAI,QAAQ;AAexB,IAAM,uBAAN,cAAmC,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAS/C,YAAa,QAAQ,OAAO,GAAG,QAAQ,OAAW;AAEjD,UAAM,WAAW,IAAI,eAAe;AAEpC,UAAM,YAAY,OAAO,SAAS,WAAW,QAAQ;AACrD,UAAM,YAAY,IAAI,uBAAwB,YAAY,IAAI,GAAG,CAAE;AAEnE,aAAS,aAAc,YAAY,SAAU;AAE7C,UAAO,UAAU,IAAI,kBAAmB,EAAE,OAAO,YAAY,MAAM,CAAE,CAAE;AAOvE,SAAK,SAAS;AAQd,SAAK,OAAO;AAEZ,SAAK,OAAO;AASZ,SAAK,mBAAmB;AAExB,SAAK,OAAO;AAAA,EAEb;AAAA;AAAA;AAAA;AAAA,EAKA,SAAS;AAER,SAAK,OAAO,kBAAmB,IAAK;AAEpC,UAAM,cAAc,KAAK,OAAO;AAEhC,UAAM,WAAW,KAAK,SAAS,WAAW;AAI1C,UAAM,cAAc,KAAK,OAAO;AAEhC,UAAM,SAAS,YAAY,WAAW;AAEtC,UAAM,SAAS,YAAY,WAAW;AAEtC,QAAI,MAAM;AAIV,aAAU,IAAI,GAAG,KAAK,OAAO,OAAO,IAAI,IAAI,KAAO;AAElD,UAAI,oBAAqB,QAAQ,CAAE,EAAE,aAAc,WAAY;AAE/D,UAAI,oBAAqB,QAAQ,CAAE;AAEnC,UAAI,mBAAoB,WAAY,EAAE,eAAgB,KAAK,IAAK,EAAE,IAAK,GAAI;AAE3E,eAAS,OAAQ,KAAK,IAAI,GAAG,IAAI,GAAG,IAAI,CAAE;AAE1C,YAAM,MAAM;AAEZ,eAAS,OAAQ,KAAK,IAAI,GAAG,IAAI,GAAG,IAAI,CAAE;AAE1C,YAAM,MAAM;AAAA,IAEb;AAEA,aAAS,cAAc;AAAA,EAExB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,UAAU;AAET,SAAK,SAAS,QAAQ;AACtB,SAAK,SAAS,QAAQ;AAAA,EAEvB;AAED;",
  "names": []
}
